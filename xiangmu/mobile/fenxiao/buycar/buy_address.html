<!-- 地址选择和添加 -->

<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Hello MUI</title>
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="stylesheet" href="../skin/mui/css/mui.min.css">
<link href="../skin/mui/css/mui.picker.css" rel="stylesheet" />
<link href="../skin/mui/css/mui.poppicker.css" rel="stylesheet" />
<link rel="stylesheet" href="../skin/fonts/style.css" />

<link rel="stylesheet" type="text/css" href="../skin/mui/css/feedback-page.css" />
<link rel="stylesheet" href="../skin/css/public.css" />
<link rel="stylesheet" href="../skin/css/style.css" />

<link rel="stylesheet" href="../skin/css/setting.css">
</head>

<body class="mui-fullscreen others">
<!--页面主结构开始-->
<div id="app" class="mui-views">
	<div class="mui-view">
		<div class="mui-navbar">
		</div>
		<div class="mui-pages">
		</div>
	</div>
</div>
<!--页面主结构结束-->
<!--单页面开始-->
	<div id="setting" class="mui-page">
	<!--页面标题栏开始-->
	<div class="mui-navbar-inner mui-bar mui-bar-nav">
		<a onclick="history.go(-1);" class="mui-left mui-action-back mui-btn-link mui-btn-nav mui-pull-left">
			<span class="mui-icon mui-icon-left-nav"></span>
		</a>
		<h1 class="mui-center mui-title">店铺设置</h1>
	</div>
	<!--页面标题栏结束-->
	<!--页面主内容区开始-->
	<div class="mui-page-content">
		<div class="mui-scroll-wrapper">
			<div class="mui-scroll">


<div class="no-mass">
	<span class="mui-icon mui-icon-info"></span>
	<div>还没收货地址哦</div>
</div>
<form class="">
	<ul class="mui-table-view mui-table-view-radio" id="address-group">

		<li class="mui-table-view-cell mui-selected" data-uid="u_1">
			<a class="mui-navigate-right">
				<div>冉杰
					<span class="ft-14 tx-9">18200132067</span>
				</div>
				<p>高新区理想中心2栋1212</p>
			</a>
		</li>
		<li class="mui-table-view-cell" data-uid="u_2">
			<a class="mui-navigate-right">
				<div><span>冉杰</span>
					<span class="ft-14 tx-9">18200132067</span>
				</div>
				<p>高新区理想中心2栋1212</p>
			</a>
		</li>
		<li class="mui-table-view-cell" data-uid="u_3">
			<a class="mui-navigate-right">
				<div>冉杰
					<span class="ft-14 tx-9">18200132067</span>
				</div>
				<p>高新区理想中心2栋1212</p>	
			</a>
		</li>
	</ul>
	<div class="pd-10 text-ct">
		<button type="button" class="mui-btn mui-btn-primary mui-icon mui-icon-checkmarkempty" id="address_true">
      使用
    </button>
		<button type="button" class="mui-btn mui-btn-danger mui-icon mui-icon-trash" id="address_del">
      删除	
    </button>
	</div>
	<div class="pd-10">
		<a href="#adress" class="mui-btn mui-btn-block mui-icon mui-icon-plus"> 新增地址</a>
	</div>
</form>
					</div>
				</div>
			</div>
			<!--页面主内容区结束-->
		</div>
		<!--单页面结束-->
<div id="adress" class="mui-page su-scroll">
	<div class="mui-navbar-inner mui-bar mui-bar-nav">
		<button type="button" class="mui-left mui-action-back mui-btn  mui-btn-link mui-btn-nav mui-pull-left">
			<span class="mui-icon mui-icon-left-nav"></span>返回
		</button>
		<!-- <button id="add_true" class="mui-btn mui-btn-blue mui-btn-link mui-pull-right" style="color:#fff;">完成</button> -->
		<h1 class="mui-center mui-title">新增收货地址</h1>
	</div>
	<div class="mui-page-content">
		<div class="pd-10">
			<form action="" id="adr_add">
				<div class="mui-input-row">
					<input type="text" class="mui-input-clear adr-name" placeholder="您的姓名" >
				</div>

				<div class="mui-input-row">
					<input type="text" class="mui-input-clear adr-phone" placeholder="手机号码">
				</div>
				<div class="mui-input-row">
					<textarea id="textarea" class="pd-10 mui-input-clear adr-dizhi" rows="3" placeholder="详细地址"></textarea>
				</div>
			</form>
			<div class="mg-t-15">
				<button id="add_true" class="mui-btn mui-btn-danger mui-btn-block" style="color:#fff;">完成</button> 
			</div>
			
		</div>
	</div>
</div>		


</body>
<script src="../skin/mui/js/mui.min.js"></script>
<script src="../skin/mui/js/mui.view.js"></script>
<script src="../skin/js/jquery-2.1.1.min.js"></script>
<script src="../skin/js/public/super.js"></script>
<script src="../skin/js/plug/layer.m/layer.m.js"></script>
<!-- 百度地图 -->
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=HsPYuiBGrmDG0SbqhKPgXSwH"></script>
	<script>
		mui.init();
		//初始化单页view
		var viewApi = mui('#app').view({
			defaultPage: '#setting'
		});
		mui('.mui-scroll-wrapper').scroll();

		var view = viewApi.view;
		(function($) {
			//处理view的后退与webview后退
			var oldBack = $.back;
			$.back = function() {
				if (viewApi.canBack()) { //如果view可以后退，则执行view的后退
					viewApi.back();
				} else { 
				//执行webview后退
					oldBack();
				}
			};

			// $('body').on('tap','#ok_back',function(){
			// 	viewApi.back();
			// })

	

  $('body').on('tap','#add_true',function(){
  	var form = jQuery('#adr_add'),
  			status = true,
  			ulBox = jQuery('#address-group'),
  			name = form.find('.adr-name').val(),
  			phone = form.find('.adr-phone').val(),
  			dizhi = form.find('.adr-dizhi').val();
  	form.find('input').each(function(index, el) {
			if(jQuery(this).val() == ''){
				status = false;
				return false;
			}
		});
		if(!status){
			layer.open({
	      content: '请填写完所有信息',
	      style: 'background-color:rgba(0,0,0,0.6); color:#fff; border:none;text-align: center;',
	      time:3
	    })
			return false;
		}
		if(!isTel(phone)){
			layer.open({
	      content: '请填写正确的手机号码',
	      style: 'background-color:rgba(0,0,0,0.6); color:#fff; border:none;text-align: center;',
	      time:3
	    })
	    return false;
		}
  	// jQuery.ajax({
  	// 	url: '/path/to/file',
  	// 	type: 'post',
  	// 	dataType: 'json',
  	// 	data: {name: name,phone: phone,dizhi: dizhi},
  	// 	success:function(data){
  	// 	uid 是后台保存新增数据后的id值
  			var uid = 'u_4';
  				var str = '<li class="mui-table-view-cell" data-uid="'+uid+'"><a class="mui-navigate-right"><div>'+name+' <span class="ft-14 tx-9">'+phone+'</span></div><p>'+dizhi+'</p>	</a></li>'

  	// 	}
  	// });
  	
  	ulBox.append(str);
  	viewApi.back();
  })
	
	$('body').on('tap','#address_true',function(){
		var uid = jQuery('.mui-table-view-radio .mui-selected').attr('data-uid');
		alert(uid)
		// jQuery.ajax({
  	// 	url: '/path/to/file',
  	// 	type: 'post',
  	// 	dataType: 'json',
  	// 	data: {uid: uid},
  	// 	success:function(data){
  	// 	
  	// 	}
  	// });

	});

	$('body').on('tap','#address_del',function(){
		var uid = jQuery('.mui-table-view-radio .mui-selected').attr('data-uid');
		// jQuery.ajax({
  	// 	url: '/path/to/file',
  	// 	type: 'post',
  	// 	dataType: 'json',
  	// 	data: {uid: uid},
  	// 	success:function(data){
  			 jQuery('.mui-table-view-radio .mui-selected').remove();
  	// 	}
  	// });

	});
 })(mui);
</script>

</html>